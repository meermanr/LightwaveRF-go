<!DOCTYPE html>
<html ng-app="link1Docs">

  <head>
    <base href="/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LightwaveRF Local API</title>

    <link rel="apple-touch-icon" sizes="57x57" href="assets/favicon/apple-touch-icon-57x57.png?v=lkkzg9444y">
    <link rel="apple-touch-icon" sizes="60x60" href="assets/favicon/apple-touch-icon-60x60.png?v=lkkzg9444y">
    <link rel="apple-touch-icon" sizes="72x72" href="assets/favicon/apple-touch-icon-72x72.png?v=lkkzg9444y">
    <link rel="apple-touch-icon" sizes="76x76" href="assets/favicon/apple-touch-icon-76x76.png?v=lkkzg9444y">
    <link rel="icon" type="image/png" href="assets/favicon/favicon-32x32.png?v=lkkzg9444y" sizes="32x32">
    <link rel="icon" type="image/png" href="assets/favicon/favicon-96x96.png?v=lkkzg9444y" sizes="96x96">
    <link rel="icon" type="image/png" href="assets/favicon/favicon-16x16.png?v=lkkzg9444y" sizes="16x16">
    <link rel="manifest" href="assets/favicon/manifest.json?v=lkkzg9444y">
    <link rel="mask-icon" href="assets/favicon/safari-pinned-tab.svg?v=lkkzg9444y" color="#5bbad5">
    <link rel="shortcut icon" href="assets/favicon/favicon.ico?v=lkkzg9444y">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">

    <link rel="stylesheet" href="https://stackedit.io/res-min/themes/base.css">
    <!-- <link rel="stylesheet" href="assets/css/stackedit.css" /> -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <!--<link href="assets/css/bootstrap.cyborg.min.css" rel="stylesheet" type="text/css"/>-->

    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
    <script src="bower_components/jquery/dist/jquery.js" type="text/javascript"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="assets/css/main.css" />
  </head>
  <body>
    <div class="container">

        <nav class="navbar navbar-default navbar-fixed-top">
            <div class="container-fluid">
                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header">
                  <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                  </button>
                    <a class="navbar-brand" href="/"><img style="height: 100%;" src="assets/favicon/favicon-96x96.png"></a>
                </div>

                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                  <ul class="nav navbar-nav">
                      <li><a href="introduction_basic_comms.html">Introduction & Basic Comms</a></li>
                      <li><a href="registration.html">Registration</a></li>
                      <li><a href="lighting_power.html">Lighting & Power</a></li>
                      <li><a href="events.html">Events</a></li>
                      <li><a href="timers.html">Timers</a></li>
                      <li><a href="energy.html">Energy</a></li>
                      <li><a href="heating.html">Heating</a></li>
                      <li><a href="settings.html">Settings</a></li>
                  </ul>
                </div><!-- /.navbar-collapse -->
              </div><!-- /.container-fluid -->
        </nav>

      <a class="btn btn-default" href="/" style="position:fixed; top:10px; right:20px;">Home</a>
      <!--<section class="container-fluid" ng-view=""></section>-->
      <section class="container-fluid" style="margin-top: 50px;"><!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lightwave Link: Settings</title>
<link rel="stylesheet" href="https://stackedit.io/res-min/themes/base.css" />
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div class="container">
<h1 id="settings"><i class="icon-cog"></i>Settings</h1>

<p>It is possible to find out information from the Link unit to help understand its behaviour.  You can initiate a Hub call in by sending <code>@H</code>, to which the Link will respond:</p>



<pre class="prettyprint"><code class=" hljs ruby">*!{
    <span class="hljs-string">"trans"</span><span class="hljs-symbol">:</span><span class="hljs-number">123</span>,
    <span class="hljs-string">"mac"</span><span class="hljs-symbol">:<span class="hljs-string">"XX:XX:XX"</span></span>,
    <span class="hljs-string">"time"</span><span class="hljs-symbol">:</span><span class="hljs-number">1420070400</span>,
    <span class="hljs-string">"pkt"</span><span class="hljs-symbol">:<span class="hljs-string">"system"</span></span>,
    <span class="hljs-string">"type"</span><span class="hljs-symbol">:<span class="hljs-string">"hub"</span></span>,
    <span class="hljs-string">"prod"</span><span class="hljs-symbol">:<span class="hljs-string">"wfl"</span></span>,
    <span class="hljs-string">"fw"</span><span class="hljs-symbol">:<span class="hljs-string">"U2.93J"</span></span>,
    <span class="hljs-string">"uptime"</span><span class="hljs-symbol">:</span><span class="hljs-number">956</span>,
    <span class="hljs-string">"timeZone"</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span>,
    <span class="hljs-string">"lat"</span><span class="hljs-symbol">:</span><span class="hljs-number">51.10</span>,
    <span class="hljs-string">"long"</span><span class="hljs-symbol">:-</span><span class="hljs-number">0</span>.<span class="hljs-number">19</span>,
    <span class="hljs-string">"tmrs"</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span>,
    <span class="hljs-string">"evns"</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span>,
    <span class="hljs-string">"run"</span><span class="hljs-symbol">:</span><span class="hljs-number">0</span>,
    <span class="hljs-string">"macs"</span><span class="hljs-symbol">:</span><span class="hljs-number">1</span>,
    <span class="hljs-string">"ip"</span><span class="hljs-symbol">:<span class="hljs-string">"192.168.1.71"</span></span>,
    <span class="hljs-string">"devs"</span><span class="hljs-symbol">:</span><span class="hljs-number">1</span>
}</code></pre>

<p>where:</p>

<table>
<thead>
<tr>
  <th>Name</th>
  <th>Value(s)</th>
  <th>Description</th>
</tr>
</thead>
<tbody><tr>
  <td>trans</td>
  <td>1-4294967295</td>
  <td>Transaction number of the JSON packet. Increments every transaction</td>
</tr>
<tr>
  <td>mac</td>
  <td>XX:XX:XX</td>
  <td>Last 6 octets of Links MAC Address</td>
</tr>
<tr>
  <td>time</td>
  <td>1420070400</td>
  <td>Timestamp of the transaction in a local UNIX time (i.e if Link is set to UTC+2, this time will be UNIX + (3600*2)</td>
</tr>
<tr>
  <td>prod</td>
  <td>wfl/lwl</td>
  <td>Denotes if the product is a WiFiLink with a Screen (wfl) or a Lightwave Link (screen-less) (lwl)</td>
</tr>
<tr>
  <td>fw</td>
  <td>U2.93J</td>
  <td>Which firmware build the Link is running</td>
</tr>
<tr>
  <td>uptime</td>
  <td>12345678</td>
  <td>The time in seconds that the Link has been running for without a power cycle, or software restart</td>
</tr>
<tr>
  <td>timeZone</td>
  <td>0</td>
  <td>The current timezone of the Link in GMT (the Link automatically goes into DST). 0 is GMT, while 1 is GMT+1 and -5 is GMT-5</td>
</tr>
<tr>
  <td>lat</td>
  <td>51.10</td>
  <td>Latitude of the Links location for dusk/dawn calculations</td>
</tr>
<tr>
  <td>long</td>
  <td>-0.19</td>
  <td>Longitude of the Links location for dusk/dawn calculations</td>
</tr>
<tr>
  <td>tmrs</td>
  <td>0 to 32</td>
  <td>The number of Timers stored in the Link</td>
</tr>
<tr>
  <td>evns</td>
  <td>0 to 32</td>
  <td>The number of Events stored in the Link</td>
</tr>
<tr>
  <td>run</td>
  <td>0 to 32</td>
  <td>The number of Events which are in the process of running in the Link</td>
</tr>
<tr>
  <td>macs</td>
  <td>0 to 12</td>
  <td>The number of tablets/phones/PCs the Link is paired to</td>
</tr>
<tr>
  <td>ip</td>
  <td>123.456.789.012</td>
  <td>The local IP address the Link is using</td>
</tr>
<tr>
  <td>dev</td>
  <td>0 to 80</td>
  <td>The number of heating and energy devices the Link is currently paired to</td>
</tr>
</tbody></table>


<p>To find out the Dusk and Dawn time, you can send <code>@D</code>, to which the Link will respond:</p>



<pre class="prettyprint"><code class=" hljs erlang-repl">*<span class="hljs-exclamation_mark">!</span>{
    <span class="hljs-string">"trans"</span>:<span class="hljs-number">123</span>,
    <span class="hljs-string">"mac"</span>:<span class="hljs-string">"XX:XX:XX"</span>,
    <span class="hljs-string">"time"</span>:<span class="hljs-number">1420070400</span>,
    <span class="hljs-string">"duskTime"</span>:<span class="hljs-number">1446827189</span>,
    <span class="hljs-string">"dawnTime"</span>:<span class="hljs-number">1446793338</span>
}</code></pre>

<p>where duskTime is the time that Dusk timers will trigger at, and dawnTime is the time where Dawn timers will trigger at.</p>

<hr>

<p>Commands to alter Link Settings:</p>

<table>
<thead>
<tr>
  <th align="left">Command</th>
  <th>Operator</th>
  <th align="left">Example</th>
</tr>
</thead>
<tbody><tr>
  <td align="left">Set Timezone</td>
  <td>!FzP(+-)nn</td>
  <td align="left"><code>!FzP1</code> Set timezone to GMT+1</td>
</tr>
<tr>
  <td align="left">&nbsp;</td>
  <td>&nbsp;</td>
  <td align="left"><code>!FzP-5</code> Set timezone to GMT-5</td>
</tr>
<tr>
  <td align="left">Set Location</td>
  <td>!FqP”xxx.xx,yyy.yy”</td>
  <td align="left"><code>!FqP”052.49,-001.91”</code> Set location to Birmingham,UK</td>
</tr>
<tr>
  <td align="left">Change Link Brightness</td>
  <td>@L</td>
  <td align="left"><code>@L0</code> Turn the LED on the Link off, and on the LW500, dim the screen</td>
</tr>
<tr>
  <td align="left"></td>
  <td></td>
  <td align="left"><code>@L1</code> Turn the LED on the Link on, and on the LW500, brighten the screen</td>
</tr>
</tbody></table>


<p>Altering the location will affect the time the Link has for dusk and dawn timers.</p>

<blockquote>
  <p><strong>Note:</strong> </p>
  
  <ul>
  <li>The Link will automatically change to DST; you do not need to account for this when setting this up.  i.e. If you are in BST, when you set the timezone, you would send <code>!FzP0</code> and not <code>!FzP1</code>.</li>
  </ul>
</blockquote>

<p><em>Last Updated 7/2/16</em></p></section>
    </div>

    <script>
        $(document).ready(function(){
            $('.toc a').click(function(e){
                e.preventDefault();
                var anc = $(this).attr('href');
                location.hash = anc;
            });
        });
    </script>

  </body>
</html>
